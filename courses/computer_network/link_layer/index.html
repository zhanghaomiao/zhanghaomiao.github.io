<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Haomiao Zhang">

  
  
  
    
  
  <meta name="description" content="understand principles behind data link layer services:  error detection, correction sharing a broadcast channel, multiple access (无线网络) link layer addressing (48 bit) reliable data transfer, flow control  instantiation and implementation of various link layer technologies  Introduction  hosts and routers are nodes communication channels that connect adjacent nodes along communication path are links (wired links, wireless links, LANs) layer-2 packet is a frame, encapsulates datagram data-link layer has a responsibility of transferring datagram from one node to adjacent node over a link datagram transferred by different link protocols over different links each link protocol provides different services (may or may not provide rdt(reliable data service) over link)  Services  Framing, link access  encapsulate datagram into frame, adding header, trailer channel access if shared mediums &ldquo;MAC&rdquo; (media access control protocol) addresses used in frame headers to identify source, destination  reliable delivery between adjacent nodes  TCP seldom used on low bit-error link(fiber, some twisted pair) wireless links high error rates  flow control: pacing between adjacent sending and receiving nodes error detections:  error caused by noise receiver detects presence of errors  error correction: receiver identifies and corrects bit error(s) without resorting to retransmission half-duplex and full-duplex with half duplex, nodes at both ends of link can transmit, but not at same time  Where is link layer implemented  in each and every host link layer implemented in &ldquo;adaptor&rdquo; (network interface card)  ethernet card, PCMCI card, 802.">

  
  <link rel="alternate" hreflang="en-us" href="/courses/computer_network/link_layer/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-light.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-light.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/courses/computer_network/link_layer/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Haomiao">
  <meta property="og:url" content="/courses/computer_network/link_layer/">
  <meta property="og:title" content="Link Layer | Haomiao">
  <meta property="og:description" content="understand principles behind data link layer services:  error detection, correction sharing a broadcast channel, multiple access (无线网络) link layer addressing (48 bit) reliable data transfer, flow control  instantiation and implementation of various link layer technologies  Introduction  hosts and routers are nodes communication channels that connect adjacent nodes along communication path are links (wired links, wireless links, LANs) layer-2 packet is a frame, encapsulates datagram data-link layer has a responsibility of transferring datagram from one node to adjacent node over a link datagram transferred by different link protocols over different links each link protocol provides different services (may or may not provide rdt(reliable data service) over link)  Services  Framing, link access  encapsulate datagram into frame, adding header, trailer channel access if shared mediums &ldquo;MAC&rdquo; (media access control protocol) addresses used in frame headers to identify source, destination  reliable delivery between adjacent nodes  TCP seldom used on low bit-error link(fiber, some twisted pair) wireless links high error rates  flow control: pacing between adjacent sending and receiving nodes error detections:  error caused by noise receiver detects presence of errors  error correction: receiver identifies and corrects bit error(s) without resorting to retransmission half-duplex and full-duplex with half duplex, nodes at both ends of link can transmit, but not at same time  Where is link layer implemented  in each and every host link layer implemented in &ldquo;adaptor&rdquo; (network interface card)  ethernet card, PCMCI card, 802."><meta property="og:image" content="img/map[gravatar:%!s(bool=true) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=true) shape:circle]"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-05-05T00:00:00&#43;01:00">
    
    <meta property="article:modified_time" content="2019-05-05T00:00:00&#43;01:00">
  

  



  


  


  





  <title>Link Layer | Haomiao</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Haomiao</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Haomiao</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/post/"><span>Posts</span></a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Courses</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/courses/"><span>All Courses</span></a>
            
              <a class="dropdown-item" href="/courses/deep_learning"><span>Deep Learning</span></a>
            
              <a class="dropdown-item" href="/courses/operating_system"><span>Operating system</span></a>
            
              <a class="dropdown-item" href="/courses/computer_network"><span>Computer network</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>


  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/computer_network/">Overview</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/computer_network/introduction/">Concepts</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/courses/computer_network/introduction/">Introduction</a>
      </li>
      
      <li >
        <a href="/courses/computer_network/application_layer/">Application Layer</a>
      </li>
      
      <li >
        <a href="/courses/computer_network/transport_layer/">Transport Layer</a>
      </li>
      
      <li >
        <a href="/courses/computer_network/network_layer/">Network Layer</a>
      </li>
      
      <li class="active">
        <a href="/courses/computer_network/link_layer/">Link Layer</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#services">Services</a></li>
<li><a href="#where-is-link-layer-implemented">Where is link layer implemented</a></li>
</ul></li>
<li><a href="#error-detection-and-error-correction">Error detection and error correction</a>
<ul>
<li><a href="#parity-checking">Parity Checking</a></li>
<li><a href="#internet-checksum">Internet Checksum</a></li>
<li><a href="#cyclic-redundancy-check">Cyclic Redundancy Check</a></li>
</ul></li>
<li><a href="#multiple-access-links-and-protocols">Multiple Access Links and Protocols</a>
<ul>
<li><a href="#ideal-multiple-access-protocol">Ideal Multiple Access Protocol</a></li>
<li><a href="#mac-protocols-a-taxonomy">MAC protocols: a taxonomy</a>
<ul>
<li><a href="#channel-partitioning-tdma-fdma">Channel Partitioning: TDMA/ FDMA</a></li>
<li><a href="#random-access">Random access</a>
<ul>
<li><a href="#slotted-aloha">Slotted ALOHA</a></li>
<li><a href="#pure-unslotted-aloha">Pure(unslotted) ALOHA</a></li>
<li><a href="#csma-carrier-sense-multiple-access">CSMA (Carrier Sense Multiple Access)</a></li>
<li><a href="#csma-cd-collision-detection">CSMA/CD (collision detection)</a></li>
</ul></li>
<li><a href="#taking-turns-mac-protocols">&ldquo;Taking Turns&rdquo; MAC protocols</a></li>
</ul></li>
</ul></li>
<li><a href="#link-layer-addressing">Link-Layer Addressing</a>
<ul>
<li><a href="#arp-address-resolution-protocol">ARP: address Resolution Protocol</a></li>
</ul></li>
<li><a href="#ethernet">Ethernet</a>
<ul>
<li><a href="#ethernet-csma-cd-algorithm">Ethernet CSMA/CD algorithm</a></li>
<li><a href="#802-3-ethernet-standards-link-physical-layers">802.3 Ethernet Standards: Link &amp; Physical Layers</a></li>
</ul></li>
<li><a href="#link-layer-switches">Link-Layer switches</a>
<ul>
<li><a href="#self-learning">Self-Learning</a></li>
<li><a href="#filtering-forwarding">Filtering/forwarding</a></li>
<li><a href="#switches-vs-routers">Switches vs. Routers</a></li>
</ul></li>
<li><a href="#ppp-rfc-1557">PPP [RFC 1557]</a>
<ul>
<li><a href="#ppp-frame">PPP Frame</a></li>
<li><a href="#atm">ATM</a></li>
<li><a href="#multi-protocol-label-switching-mpls">Multi-protocol label switching (MPLS)</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          <h1>Link Layer</h1>

          <div class="article-style">
            

<ul>
<li>understand principles behind data link layer services:

<ul>
<li>error detection, correction</li>
<li>sharing a broadcast channel, multiple access (无线网络)</li>
<li>link layer addressing (48 bit)</li>
<li>reliable data transfer, flow control</li>
</ul></li>
<li>instantiation and implementation of various link layer technologies</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p><img src="https://i.loli.net/2019/04/06/5ca85427a4c9a.png" width="400px"/></p>

<ul>
<li>hosts and routers are nodes</li>
<li>communication channels that connect adjacent nodes along communication path are links (wired links, wireless links, LANs)</li>
<li>layer-2 packet is a frame, encapsulates datagram</li>
<li>data-link layer has a responsibility of transferring datagram from one node to adjacent node over a link</li>
<li>datagram transferred by different link protocols over different links</li>
<li>each link protocol provides different services (may or may not provide rdt(reliable data service) over link)</li>
</ul>

<h3 id="services">Services</h3>

<ul>
<li>Framing, link access

<ul>
<li>encapsulate datagram into frame, adding header, trailer</li>
<li>channel access if shared mediums</li>
<li>&ldquo;MAC&rdquo; (media access control protocol) addresses used in frame headers to identify source, destination</li>
</ul></li>
<li>reliable delivery between adjacent nodes

<ul>
<li>TCP</li>
<li>seldom used on low bit-error link(fiber, some twisted pair)</li>
<li>wireless links high error rates</li>
</ul></li>
<li>flow control: pacing between adjacent sending and receiving nodes</li>
<li>error detections:

<ul>
<li>error caused by  noise</li>
<li>receiver detects presence of errors</li>
</ul></li>
<li>error correction: receiver identifies and corrects bit error(s) without resorting to retransmission</li>
<li>half-duplex and full-duplex
with half duplex, nodes at both ends of link can transmit, but not at same time</li>
</ul>

<h3 id="where-is-link-layer-implemented">Where is link layer implemented</h3>

<p><img src="https://i.loli.net/2019/04/06/5ca858ae361ff.png" width="400px"/></p>

<ul>
<li>in each and every host</li>
<li>link layer implemented in &ldquo;adaptor&rdquo; (network interface card)

<ul>
<li>ethernet card, PCMCI card, 802.11 card</li>
<li>implement link, physical layer</li>
</ul></li>
<li>attaches into host&rsquo;s system buses</li>
<li>combination of hardware, software, firmware</li>
<li>sending side : encapsulates datagram in frame, address error checking bits, rdt, flow control, etc</li>
<li>receiving side: look for errors, rdt, flow control etc, extracts datagram, passes to upper layer at receiving side</li>
</ul>

<h2 id="error-detection-and-error-correction">Error detection and error correction</h2>

<ul>
<li>EDC: Error detection and correction bits (redundancy)</li>
<li>D: data protected by error checking, may include header files</li>
<li>Error detection not 100% reliable

<ul>
<li>protocol may miss some errors, but rarely</li>
<li>larger EDC field yields better detection and correction</li>
</ul></li>
</ul>

<p><img src="https://i.loli.net/2019/04/06/5ca85a9c09874.png" width="400px"/></p>

<h3 id="parity-checking">Parity Checking</h3>

<ul>
<li>Single Bit Parity (Detect single bit errors)
<img src="https://i.loli.net/2019/04/06/5ca85b23a266e.png" width="400px"/></li>
<li>Two dimensional Bit Parity (Detect and correct single bit errors)
<img src="https://i.loli.net/2019/04/06/5ca85b845aa63.png" width="400px"/></li>
</ul>

<h3 id="internet-checksum">Internet Checksum</h3>

<ul>
<li>detect &ldquo;errors&rdquo; (e.g. flipped bits) in transmitted packet (used at transport layer only)</li>
<li>Sender:

<ul>
<li>treat segment contents as sequence of 16-bit integers</li>
<li>checksum: addition (1&rsquo;s complement sum) of segment contents</li>
<li>sender puts checksum value into UDP checksum fields</li>
</ul></li>
<li>Receiver:

<ul>
<li>compute checksum of received checksum</li>
<li>check if computed checksum equals checksum field value</li>
</ul></li>
</ul>

<h3 id="cyclic-redundancy-check">Cyclic Redundancy Check</h3>

<ul>
<li>view data bits D as a binary number</li>
<li>choose r+1 bit pattern (generator) G</li>
<li>goal: choose r CRC bits, R, such that

<ul>
<li><D,R> exactly divisible by G</li>
<li>receiver knows G, divides <D,R> by G</li>
<li>can detect all burst errors less than r+1 bits</li>
</ul></li>
<li>widely used in practice (Ethernet, 802.11 WIFI, ATM)
<img src="https://i.loli.net/2019/04/06/5ca85e5f9fc02.png" width="400px"/>
<img src="https://i.loli.net/2019/04/06/5ca85eca9089e.png" width="400px"/></li>
</ul>

<h2 id="multiple-access-links-and-protocols">Multiple Access Links and Protocols</h2>

<ul>
<li>Two types of &ldquo;links&rdquo;

<ul>
<li>Point-to-point: PPP for dial-up access, point-to-point link between Ethernet switch and host</li>
</ul></li>
<li>broadcast (shared wire or medium)

<ul>
<li>old-fashioned Ethernet</li>
<li>upstream HFC (hybrid fiber coax)</li>
<li>802.11 wireless LAN
<img src="https://i.loli.net/2019/04/06/5ca85ff5c1043.png"/></li>
</ul></li>
<li>single shared  broadcast channel</li>
<li>two or more simultaneous transmissions by nodes: collision if node receives two or more signals at the same time</li>
<li>multiple access protocol:

<ul>
<li>distributed algorithm that determines how nodes share channel, i.e. determine when node can transmit</li>
<li>communication about channel sharing must use channel itself, no out-of-band channel for coordination</li>
</ul></li>
</ul>

<h3 id="ideal-multiple-access-protocol">Ideal Multiple Access Protocol</h3>

<p>Broadcast channel of rate R bps</p>

<ol>
<li>when one node wants to transmit, it can send at rate R</li>
<li>when M nodes want to transmit, each can send at average rate R?M</li>
<li>fully decentralized

<ul>
<li>no special node to coordination transmissions</li>
<li>no synchronization of clocks, slots</li>
</ul></li>
<li>simple</li>
</ol>

<h3 id="mac-protocols-a-taxonomy">MAC protocols: a taxonomy</h3>

<h4 id="channel-partitioning-tdma-fdma">Channel Partitioning: TDMA/ FDMA</h4>

<ul>
<li>TDMA: time division multiple access

<ul>
<li>access to channel in &ldquo;rounds&rdquo;</li>
<li>each station gets fixed length slot(length= packet transmission time) in each round</li>
<li>unused slots go idle</li>
</ul></li>
<li>FDMA: frequency division multiple access

<ul>
<li>channel spectrum divided into frequency bands</li>
<li>each station assigned fixed frequency band</li>
<li>unused transmission time in frequency bands go idle
<img src="https://i.loli.net/2019/04/06/5ca86e895021e.png" width="400px"/></li>
</ul></li>
</ul>

<h4 id="random-access">Random access</h4>

<p>channel not divided, allow collisions, &ldquo;recover&rdquo; from collisions</p>

<ul>
<li>when node has packet to send, transmit at full channel data rate R</li>
<li>two or more transmitting nodes $\rightarrow$ collision</li>
<li>random access MAC protocol specifies

<ul>
<li>how to detect collisions</li>
<li>how to recover from collisions (e.g. via delayed retransmission)</li>
</ul></li>
<li>examples of random access MAC protocols: slotted ALOHA, CSMA, CSMA/CD (ethernet), CSMA/CA</li>
</ul>

<h5 id="slotted-aloha">Slotted ALOHA</h5>

<p><img src="https://i.loli.net/2019/04/06/5ca86ff170d36.png" width="400px"/>
- all frames same size
- time divided into equal size slots (time to )</p>

<ul>
<li>Operation: when node obtains fresh frame, transmits in next slot

<ul>
<li>if no collision:<br /></li>
<li>if collision: node retransmits frame in each subsequent slot with pro</li>
</ul></li>
<li>Cons:

<ul>
<li>collisions, wasting slots</li>
<li>idle slots</li>
<li>nodes may be able to detect collision in less than time to transmit pocket</li>
<li>clock synchronization</li>
</ul></li>
<li>Pros

<ul>
<li>single</li>
<li>highly decentralized</li>
<li>simple</li>
</ul></li>
<li>Efficiency: long-run fraction of successful slots (many nodes, all with many frames to send)

<ul>
<li>suppose: N nodes with many frames to send, each transmits in slot with probability p</li>
<li>prob that given node has success in a slot = $p(1-p)^{N-1}$</li>
<li>prob than any node has a success = $Np(1-p)^{N-1}$</li>
<li>for many nodes, max efficiency $p = 1/e = 0.37$</li>
</ul></li>
</ul>

<h5 id="pure-unslotted-aloha">Pure(unslotted) ALOHA</h5>

<ul>
<li>unslotted Aloha: simpler, no synchronization</li>
<li>when frame first arrives: transmit immediately</li>
<li>collision probability increases, frame set at $t_0$ collides with other frames send in $[t_0-1, t_0+1]$
<img src="https://i.loli.net/2019/04/06/5ca87295cba56.png" width="400px"/></li>
<li>prob $p*(1-p)^{2(N-1)}$</li>
<li>for many nodes, max efficiency $p = 1/(2e) = 0.18$</li>
</ul>

<h5 id="csma-carrier-sense-multiple-access">CSMA (Carrier Sense Multiple Access)</h5>

<p>CSMA: listen before transmit, if channel sensed idle transmit entire frame, if channel sensed busy, defer transmission</p>

<p><img src="https://i.loli.net/2019/04/06/5ca87401d7b82.png" width="400px"/></p>

<ul>
<li>collision: entire packet transmission time wasted</li>
<li>role of distance &amp; propagation delay in determining collision probability</li>
</ul>

<h5 id="csma-cd-collision-detection">CSMA/CD (collision detection)</h5>

<p><img src="https://i.loli.net/2019/04/06/5ca8753567677.png" width="400px"/></p>

<ul>
<li>collision detection:

<ul>
<li>easy in wried LANS: measure signal strengths, compare transmitted, received signals</li>
<li>difficult in wireless LANs; received signal strength overwhelmed by local transmission strength</li>
<li>CSMA/CD used in Ethernet</li>
<li>CSMA/CA (collision avoidance) used in 802.11</li>
</ul></li>
</ul>

<h4 id="taking-turns-mac-protocols">&ldquo;Taking Turns&rdquo; MAC protocols</h4>

<ul>
<li>channel partitioning MAC protocols:

<ul>
<li>share channel efficiently and fairly at high load</li>
<li>inefficient at low load: delay in channel access, 1/N bandwidth allocated even if only 1 active node</li>
</ul></li>
<li>Random access MAC protocols:

<ul>
<li>efficient at low load: single node can fully utilized channel</li>
<li>high load: collision overhead</li>
</ul></li>
<li>taking turns protocols: look for best of both worlds</li>
<li>Polling

<ul>
<li>master node &ldquo;invites&rdquo; slave nodes to transmit in turn</li>
<li>typically used with &ldquo;dumb&rdquo;</li>
</ul></li>
<li>Token passing (Taking Turns):

<ul>
<li>control token passed from one node to next sequentially</li>
<li>token message</li>
<li>concerns: token overhead, latency, singe point of failure</li>
</ul></li>
<li>example: Bluetooth, FDDI, IBM Token Ring</li>
</ul>

<h2 id="link-layer-addressing">Link-Layer Addressing</h2>

<ul>
<li>32-bit IP address:

<ul>
<li>network-layer address</li>
<li>used to get datagram to destination IP subnet</li>
</ul></li>
<li>MAC (or LAN or physical or Ethernet) address:

<ul>
<li>function: get frame from one interface to another physically-connected interface (same network)</li>
<li>48 bit MAC address (for most LANS)</li>
<li>burned in NIC ROM, also sometimes software settable</li>
</ul></li>
<li>Each adapter on LAN has unique LAN address (FF-FF-FF-FF-FF-FF: broadcast address)</li>
<li>mac address allocation administered by IEEE</li>
<li>manufacturer buys portion of MAC address space (to assure uniqueness)</li>
<li>MAC flat address $\rightarrow$ portability, can move LAN card from one LAN to another</li>
<li>IP hierarchical address not portable</li>
</ul>

<h3 id="arp-address-resolution-protocol">ARP: address Resolution Protocol</h3>

<ul>
<li>how to determine MAC address of B knowing B&rsquo;s IP address?</li>
<li>Each IP node (host, router) on LAN has ARP table</li>
<li>ARP table: IP/MAC address mappings for some LAN nodes, TTL(time to live): time after which address mapping will be forgotten (typically 20 minutes)
<img src="https://i.loli.net/2019/04/06/5ca87cadbddda.png" width="500px"/></li>
<li>procedure

<ul>
<li>A wants to send datagram to B, and B&rsquo;s MAC address not in A&rsquo;s ARP table</li>
<li>A broadcast ARP query packet, containing B&rsquo;s IP address, all machines on LAN receive ARP query</li>
<li>B receivers ARP packet, replies to A with its (B&rsquo;s) MAC address (frames send to A&rsquo;s MAC address(unicast))</li>
<li>A caches (saves) IP-to-MAC address pair in its ARP table until information becomes old (times out)</li>
<li>ARP is &ldquo;plug-and-play&rdquo;, node creates their ARP tables without intervention form net administrator</li>
</ul></li>
<li>example:
<img src="https://i.loli.net/2019/04/06/5ca87f2ac983f.png" width="550px"/></li>
</ul>

<h2 id="ethernet">Ethernet</h2>

<ul>
<li>features:

<ul>
<li>cheap</li>
<li>first widely used LAN technology</li>
<li>simpler, cheaper than  token LANs and ATM</li>
<li>kept up with speed race: 10Mbps - 10 Gbps</li>
</ul></li>
<li>bus topology popular through mid 90-s (all nodes in same collision domain, can collide with each other)</li>
<li>today: star topology prevails

<ul>
<li>active, switch in center</li>
<li>each &ldquo;spoke&rdquo; run a (separate) Ethernet protocol (nodes do not collide with each other)</li>
</ul></li>
<li>Ethernet Frame structure
<img src="https://i.loli.net/2019/04/06/5ca88188bf408.png" width="500px"/>

<ul>
<li>Preamble: 7 bytes with pattern 10101010 followed by one byte with pattern 10101011</li>
<li>used to synchronize receiver, sender clock rates</li>
<li>Addresses: 6 bytes, if adapter receives frame with matching destination address, or with broadcast address (e.g. ARP packet), it passes data in frame to network layer protocol, otherwise, adapter discards frame</li>
<li>Type: indicates higher layer protocol (mostly IP but others possible, e.g. Novell IPX, Apple Talk)</li>
<li>CRC: checked at receiver, if error is detected, frame is dropped</li>
</ul></li>
<li>Unreliable, connectionless

<ul>
<li>connectionless: No handshaking between sending and receiving NICs</li>
<li>unreliable： receiving NIC(network interface card) doesn&rsquo;t send ACKs or NAKs to sending NIC</li>
<li>stream of datagrams passed to network layer can have gaps(missing datagrams)</li>
<li>gaps will be filled if app is using TCP, otherwise app will see gaps</li>
<li>Ethernet&rsquo;s MAC protocol: unslotted CSMA/CD</li>
</ul></li>
</ul>

<h3 id="ethernet-csma-cd-algorithm">Ethernet CSMA/CD algorithm</h3>

<ol>
<li>NIC receives datagram from network layer, creates frame</li>
<li>IF NIC senses channel idle, starts frame transmission, IF NIC senses channel busy, waits until channel idle, then transmits</li>
<li>If NIC transmits entire frame without detecting another transmission, NIC is done with frame</li>
<li>If NIC detects another transmission while transmitting, aborts and sends jam signal</li>
<li>After aborting, NIC enters exponential backoff: after mth collision, NIC chooses K at random from $(0, 1,2, &hellip;, 2^m-1)$ NIC waits K*512 bit times, returns to Step2</li>
</ol>

<ul>
<li>Jam signal: make sure all other transmitters are aware of collision: 48 bits</li>
<li>Bit time: 1 microsecond for 10 Mbps Ethernet, for K=1023,wait time is about 50 msec</li>
<li>Exponential Backoff (最多连续16次)

<ul>
<li>Goal: adapt retransmission attempts to estimated current load (heavy load: random wait will be longer)</li>
<li>first collision: choose K from (0,1), delay is K*512 bit transmission times</li>
<li>after second collision: choose K from {0,1,2,3}</li>
<li>after ten collisions: choose K from {0,1,2,3,4,&hellip;,1023}</li>
</ul></li>
<li>Efficiency (70%)

<ul>
<li>$T_{prop}$ = max prop delay between 2 nodes in LAN</li>
<li>$T<em>{trans}$ = time to transmit max-size frame
$$\text{efficiency} = \frac{1}{1+5t</em>{prop}/t_{trans}}$$</li>
<li>Efficiency goes to 1 as $t<em>{prop}$ goes to 0, as t</em>{trans}$ goes to infinity</li>
<li>better performance than ALOHA: and simple, cheap, decentralized</li>
</ul></li>
</ul>

<h3 id="802-3-ethernet-standards-link-physical-layers">802.3 Ethernet Standards: Link &amp; Physical Layers</h3>

<ul>
<li>many different Ethernet standards

<ul>
<li>common MAC protocol and frame format</li>
<li>different speeds: 2Mbps, 10Mbps, 100Mbps, 1Gbps, 10Gbps</li>
<li>different physical layer media: fiber, cable
<img src="https://i.loli.net/2019/04/06/5ca889e6adb92.png"/></li>
</ul></li>
<li>Manchester encoding

<ul>
<li>used in 10Base T</li>
<li>each bit has a transition</li>
<li>allows clocks in sending and receiving nodes to synchronize to each other, no need for a centralized, global clock among nodes</li>
</ul></li>
</ul>

<h2 id="link-layer-switches">Link-Layer switches</h2>

<ul>
<li>Hubs

<ul>
<li>physical-layer (&ldquo;dumb&rdquo; repeaters, 只处理信号)</li>
<li>bits coming in one link go out all other links at same rate</li>
<li>all nodes connected to hub can collide with one another</li>
<li>no frame buffering</li>
<li>no CSMA/CD at hub: host NIC detect collisions</li>
</ul></li>
<li>Switch: allow multiple simultaneous transmissions

<ul>
<li>link-layer device: smarter than hubs, take active role</li>
<li>store, forward Ethernet frames</li>
<li>examine incoming frame&rsquo;s MAC address, selectively forward frame to one-or-more outgoing links when frame is to be forwarded on segment, uses CSMA/CD to access segment</li>
<li>transparent, hosts are unaware of presence of switches</li>
<li>plug-and-play, self-learning, switch do not need to be configured</li>
<li>switch table:  Each switch has a switch table, each entry (MAC address of host, interface to reach host, time stamp</li>
</ul></li>
</ul>

<h3 id="self-learning">Self-Learning</h3>

<ol>
<li>Switch table is initially empty</li>
<li>For each incoming frame received on an interface, the switches stores in its table

<ol>
<li>The MAC address in the frame&rsquo;s source address field</li>
<li>the interface from which the frame arrived</li>
<li>the current time</li>
</ol></li>
<li>the switch deletes an address in the table if no frames are received with that address as the source address after some period of time</li>
</ol>

<h3 id="filtering-forwarding">Filtering/forwarding</h3>

<ul>
<li>Filtering: whether a frame should be forwarded to some interface or should just be dropped</li>
<li>Forwarding: determine the interfaces to which a frame should be directed, and then moves the frame to those interfaces</li>
<li>suppose a frame with destination address DD-DD-DD-DD-DD-DD arrives at the switch on interface x

<ul>
<li>there is no entry in the table for DD-DD-DD-DD-DD-DD, the switch forwards copies of the frame to the output buffers preceding all interfaces (broadcast the frame)</li>
<li>there is an entry in the table, associating DD-DD-DD-DD-DD-DD with interface x: there is no need to forward the frame to any of the other interfaces, switch performs filtering function by discarding the frame. (送和收在同一区域）</li>
<li>there is an entry in table, associating DD-DD-DD-DD-DD-DD with interface $y \neq x$, the frame needs to be forwarded to the LAN segment attached to interface y. Switch performs its forwarding function by putting the frame in an output buffer that precedes interface y.</li>
</ul></li>
</ul>

<h3 id="switches-vs-routers">Switches vs. Routers</h3>

<p><img src="https://i.loli.net/2019/04/06/5ca8921f69722.png" width="400px"/></p>

<ul>
<li>both store-and-forward devices: routers are network layer devices, switches are link layer address</li>
<li>Routers maintain routing tables, implement routing algorithms</li>
<li>switches maintain switch tables, implement filtering, learning algorithms</li>
</ul>

<h2 id="ppp-rfc-1557">PPP [RFC 1557]</h2>

<p>Point to Point Data Link Control</p>

<ul>
<li>one sender, one receiver, one link: easier than broadcast link</li>
<li>no media Access control</li>
<li>no need for explicit MAC addressing  (e.g. dialup link)</li>
<li>popular point-to-point DLC protocols: PPP, HDLC</li>
</ul>

<h3 id="ppp-frame">PPP Frame</h3>

<ul>
<li>packet framing: encapsulation of network-layer datagram in data link frame

<ul>
<li>carry network layer data of any network layer protocol (not just IP) at same time</li>
<li>ability to demultiplex upwards</li>
</ul></li>
<li>bit transparency: must carry any bit pattern in the data field</li>
<li>error detection (no correction)</li>
<li>connection liveness: detect, signal link failure to network layer</li>
<li>network layer address negotiation: endpoint can learn/configure each other&rsquo;s network address</li>
<li>data frame
<img src="https://i.loli.net/2019/04/07/5ca9ba6436d50.png" width="450px"/>

<ul>
<li>Flag: delimiter (framing)</li>
<li>Address: does nothing</li>
<li>control: does nothing:</li>
<li>protocol: upper layer protocol to which frame delivered (e.g. PPP-LCP, IP, IPCP etc)</li>
<li>info: information</li>
<li>check: cyclic redundancy check for error-detection</li>
</ul></li>
<li>PPP non-requirements

<ul>
<li>no error correction</li>
<li>no flow control</li>
<li>out of order delivery</li>
<li>no need to support multipoint links</li>
<li>error recovery, flow control, data re-ordering all relegated to higher layers</li>
</ul></li>
<li>Byte Stuffing

<ul>
<li>&ldquo;data transparency&rdquo; requirement: data field must be allowed to include flag pattern  <01111110></li>
<li>Sender: adds extra <01111110> byte after each <01111110> data byte</li>
<li>Receiver: two 01111110 bytes in a row: discard first byte, continue data reception; singe 01111110:flag byte</li>
</ul></li>
<li>PPP data Control Protocol

<ul>
<li>before exchanging network-layer data, data link peers must</li>
<li>configure PPP link (max frame length, authentication)</li>
<li>learn / configure network layer information</li>
</ul></li>
</ul>

<h3 id="atm">ATM</h3>

<ul>
<li>Virtualization of networks

<ul>
<li>Layering of abstractions: don&rsquo;t sweat the details of the lower layer, only deal with lower layers abstractly</li>
<li>two layers of addressing: internetwork and local network</li>
<li>new layer (IP) makes everything homogeneous at internetwork layer</li>
</ul></li>
<li>Asynchronous Transfer Mode: ATM

<ul>
<li>Goal: integrated, end-end transport of carry voice, video, data</li>
<li>meeting timing / QoS requirements of voice, video (versus Internet best-effort model)</li>
<li>&ldquo;next generation&rdquo; telephony (下一代网络电话）</li>
<li>packet-switching (fixed length packets, 53 bytes, called &ldquo;cells&rdquo;) using virtual circuits</li>
</ul></li>
<li>For more information, see <a href="https://www.net.t-labs.tu-berlin.de/teaching/computer_networking/05.09.htm">Computer Networking Website</a></li>
</ul>

<h3 id="multi-protocol-label-switching-mpls">Multi-protocol label switching (MPLS)</h3>

<ul>
<li>Goal: speed up IP forwarding by using fixed length label (instead of IP address) to do forwarding (20bits)

<ul>
<li>Borrowing ideas from Virtual Circuit (VC) approach</li>
<li>but IP datagram still keeps IP address
<img src="https://i.loli.net/2019/04/07/5ca9bfc799f05.png" width="500px"/></li>
</ul></li>
<li>MPLS-enhanced forwarding
<img src="https://i.loli.net/2019/04/07/5ca9c076ea536.png" width="500px"/></li>
</ul>

          </div>

          



          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/courses/computer_network/network_layer/" rel="next">Network Layer</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/courses/computer_network/introduction/" rel="prev">Introduction</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on May 5, 2019</p>

          





  
  

<p class="edit-page">
  <a href="https://github.com/zhanghaomiao/academic-kickstart/edit/master/content/courses/computer_network/link_layer.md">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>




          

        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>


      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/fortran.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/c.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/java.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.c816d323c3a55093dae0829b44ea1ca8.js"></script>

    






  
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
